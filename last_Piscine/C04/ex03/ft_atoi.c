/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_atoi.c                                          :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: harumoren2507 <kuroshiro0725@gmail.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/01/28 03:27:46 by harumoren25       #+#    #+#             */
/*   Updated: 2024/01/28 04:18:00 by harumoren25      ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

int	ft_atoi(char *str)
{
	int	sign; // 符号
	int	result; //  この変数は文字列から抽出された数値を保持する変数

	sign = 1;
	result = 0;
	while (*str == ' ' || ((9 <= *str) && (*str <= 13)))
		str++;
    // 空白のスキップ
	while ((*str == '+') || (*str == '-'))
	{
		if (*str == '-')
			sign *= -1;
		str++;
    //　整数の符号（正か負か）を決定する。マイナス記号が奇数回現れると、数値は負になる。
	}
	while ('0' <= *str && *str <= '9')
	{
		result = result * 10 + (*str - '0');
		str++;
    //　文字列内の各数字を取り出し、それを整数に変換する。★1参照。
	}
	return (result * sign);
}


/*
*ft_atoi のプログラム概要

このプログラムは ft_atoi という関数で、文字列を整数に変換する処理を行います。
この関数は以下の手順に従って動作します：

空白のスキップ: 文字列の先頭にある空白（スペースやタブなど）を無視します。

符号の処理: 文字列に含まれるプラス（+）またはマイナス（-）記号を読み、
整数の符号（正か負か）を決定します。マイナス記号が奇数回現れると、数値は負になります。

数字の読み取り: 数字（0から9まで）を読み取り、それを整数に変換します。

結果の返却: 最後に、読み取った数値に符号を適用して、その結果を返します。

例えば、この関数に " -123" という文字列を渡すと、
最初のスペースを無視し、- 符号で数値が負になり、123 を整数に変換して -123 を返します。

この関数は、文字列の先頭にある空白と符号を処理し、
最初の非数字文字が現れるまでの数字を整数に変換するという、文字列解析の基本をカバーしています。


*空白文字の処理:

文字列は任意の量の空白文字で始まることができます。
isspace(3) 関数で定義される空白文字が該当します（例: スペース、タブ）。
符号の処理:

*文字列は任意の量のプラス（+）またはマイナス（-）記号に続くことができます。
マイナス記号がある場合、マイナスの数が奇数のときは結果が負になり、偶数のときは正になります。
数値の処理:

*文字列は10進数の数字が続くことができます。
数字はこれらの数字に基づいて解析されます。
文字列の解析終了条件:

*上記の規則に従わない文字が現れた場合、
解析はそこで終了し、その時点までに見つかった数値が返されます。
オーバーフローとアンダーフローの扱い:

*関数はオーバーフローやアンダーフローを処理する必要はありません。その場合の結果は未定義です。
使用例
例えば、この関数に " ---+--+1234ab567" という文字列を渡した場合、
関数は -1234 を返します。これは、先頭の空白を無視し、

符号の処理でマイナスが奇数回現れるため負の数値になり、
1234 までの数字を解析し、それ以降の非数値文字 ab567 で解析を終了するためです。

*関数プロトタイプ
関数は以下のように宣言されるべきです：

int ft_atoi(char *str);
これは基本的な文字列解析の問題で、
C言語における文字列処理の基本的な技術を理解するのに役立つ良い練習問題です。

*★1:実際の処理の流れ

数値の抽出と構築:

次に、文字 '1', '2', '3', '4' が順番に処理されます。
各ステップで result は次のように更新されます：
result = 0 * 10 + ('1' - '0') = 0 + 1 = 1
result = 1 * 10 + ('2' - '0') = 10 + 2 = 12
result = 12 * 10 + ('3' - '0') = 120 + 3 = 123
result = 123 * 10 + ('4' - '0') = 1230 + 4 = 1234
符号の適用:

最後に、sign（この場合は -1）を result に掛け合わせます。
結果は -1234 です。


*/